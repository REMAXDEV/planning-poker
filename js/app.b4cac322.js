(function(t){function e(e){for(var n,s,i=e[0],c=e[1],l=e[2],m=0,f=[];m<i.length;m++)s=i[m],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,i=1;i<o.length;i++){var c=o[i];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},r={app:0},a=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/planning-poker/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("cd49")},"13fb":function(t,e,o){"use strict";var n=o("ef17"),r=o.n(n);r.a},"41bc":function(t,e,o){},"5c0b":function(t,e,o){"use strict";var n=o("9c0c"),r=o.n(n);r.a},9252:function(t,e,o){"use strict";var n=o("bf6b"),r=o.n(n);r.a},"9c0c":function(t,e,o){},bf6b:function(t,e,o){},c583:function(t,e,o){},cd49:function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("a026"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mx-auto bg-light shadow-sm position-relative",attrs:{id:"app"}},[o("transition",{attrs:{name:"fade"}},[t.$store.state.confetti?o("confetti-component"):t._e()],1),o("header-component"),o("div",{staticClass:"position-relative"},[o("router-view")],1)],1)},a=[],s=o("d4ec"),i=o("2caf"),c=o("262e"),l=o("9ab4"),u=o("60a3"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nav",{staticClass:"navbar navbar-dark bg-dark"},[o("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[o("img",{staticClass:"logo d-inline-block align-top mr-2",attrs:{src:"img/favicon-192x192.png"}}),t._v(" Planning Poker ")]),o("span",{staticClass:"navbar-text"},[o("font-awesome-icon",{attrs:{icon:"user-circle",size:"lg"}}),t._v(" "+t._s(t._f("nameFilter")(t.$store.state.myName||"Guest"))+" ")],1)],1)},f=[];o("a15b"),o("d81d"),o("ac1f"),o("1276");function p(t){return t.split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.substring(1)})).join(" ")}var b=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){return Object(s["a"])(this,o),e.apply(this,arguments)}return o}(u["c"]);b=Object(l["__decorate"])([Object(u["a"])({filters:{nameFilter:p}})],b);var v=b,h=v,d=(o("f019"),o("2877")),y=Object(d["a"])(h,m,f,!1,null,"64851ac0",null),_=y.exports,g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"confetti-container"},t._l(20,(function(t){return o("div",{key:t,staticClass:"confetti-piece"})})),0)},O=[],j=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){return Object(s["a"])(this,o),e.apply(this,arguments)}return o}(u["c"]);j=Object(l["__decorate"])([u["a"]],j);var w=j,C=w,k=(o("9252"),Object(d["a"])(C,g,O,!1,null,"004fedcc",null)),P=k.exports,N=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){return Object(s["a"])(this,o),e.apply(this,arguments)}return o}(u["c"]);N=Object(l["__decorate"])([Object(u["a"])({components:{HeaderComponent:_,ConfettiComponent:P}})],N);var x=N,$=x,S=(o("5c0b"),Object(d["a"])($,r,a,!1,null,null,null)),I=S.exports,V=o("8c4f"),L=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"p-5"},[o("h1",{staticClass:"mb-4 text-center"},[t._v("Sign In")]),o("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Session Name")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.room,expression:"room"}],ref:"roomInput",staticClass:"form-control",attrs:{type:"text",placeholder:"e.g. remax/motto...",required:""},domProps:{value:t.room},on:{input:function(e){e.target.composing||(t.room=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Your Name")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.myName,expression:"myName"}],ref:"myNameInput",staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.myName},on:{input:function(e){e.target.composing||(t.myName=e.target.value)}}})]),o("div",{staticClass:"mt-4"},[o("button",{staticClass:"btn btn-primary mr-4",attrs:{type:"submit"}},[t._v("Join Session")]),t._v(" OR "),o("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.observer(e)}}},[t._v("Join As Observer")])])])])},D=[],E=(o("498a"),o("bee2")),A=o("59ca"),R=(o("66ce"),function(){function t(e){Object(s["a"])(this,t),this.room="",this.player="",A["initializeApp"](e),this.db=A["database"](),console.info("new FirebaseService")}return Object(E["a"])(t,[{key:"signIn",value:function(t,e){var o=this;if(this.db.goOnline(),this.room=t.toLowerCase(),this.player=e.toLowerCase(),this.player){this.setPoint(0);var n=this.db.ref(".info/connected");n.on("value",(function(t){if(!0===t.val()){var e=o.db.ref(o.room+"/players/"+o.player+"/connected");e.onDisconnect().remove(),e.set(!0)}}))}}},{key:"setPoint",value:function(t){this.db.ref(this.room+"/players/"+this.player+"/point").set(t).catch(this.errorHandler)}},{key:"clearVotes",value:function(){var t=this;this.db.ref(this.room).once("value").then((function(e){var o=e.val(),n={showPoints:0,players:{}};for(var r in o.players)n.players[r]={point:0,connected:!!o.players[r].connected};t.db.ref(t.room).set(n).catch(t.errorHandler)})).catch(this.errorHandler)}},{key:"showVotes",value:function(){this.db.ref(this.room+"/showPoints").set(1).catch(this.errorHandler)}},{key:"watch",value:function(t){this.db.ref(this.room).on("value",t),console.info("Connect to: "+this.room)}},{key:"deletePlayer",value:function(t){t&&this.db.ref(this.room+"/players/"+t.toLowerCase()).remove().catch(this.errorHandler)}},{key:"detachListener",value:function(){this.db.ref(this.room).off(),this.db.ref(".info/connected").off(),console.info("Disconnect from: "+this.room)}},{key:"offline",value:function(){this.db.goOffline()}},{key:"errorHandler",value:function(t){console.error(t)}}]),t}()),F=new R({apiKey:"AIzaSyAW076Ai3lOBhONLt8pKfUA0jedjf5A7RY",authDomain:"planning-poker-remax.firebaseapp.com",databaseURL:"https://planning-poker-remax.firebaseio.com",projectId:"planning-poker-remax",storageBucket:"planning-poker-remax.appspot.com",messagingSenderId:"1050364771989",appId:"1:1050364771989:web:a5c621b239496dfaf9e59c"}),H=F,M=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.room="",t.myName="",t}return Object(E["a"])(o,[{key:"mounted",value:function(){this.myName=this.$store.getters.getName,this.room=this.$store.getters.getRoom,this.room?this.myName||this.$refs.myNameInput.focus():this.$refs.roomInput.focus(),H.offline()}},{key:"onSubmit",value:function(){this.myName=this.myName.trim(),this.room&&this.myName&&(this.$store.commit("setName",this.myName),this.$router.push("/"+this.room))}},{key:"observer",value:function(){this.room?this.$router.push("/"+this.room+"?observer=1"):this.$refs.roomInput.focus()}}]),o}(u["c"]);M=Object(l["__decorate"])([u["a"]],M);var T=M,z=T,J=Object(d["a"])(z,L,D,!1,null,"28bff254",null),q=J.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"p-5"},[o("h1",{staticClass:"mb-4 text-center"},[t._v(" "+t._s(t._f("nameFilter")(t.room))+" ")]),t.observer?t._e():o("div",{staticClass:"mb-4"},[o("poker-component",{staticClass:"justify-content-center",attrs:{currentPoint:t.myPoint},on:{onPoint:t.point}})],1),o("players-component",{staticClass:"table text-center mb-5 bg-light w-auto mx-auto shadow-sm",attrs:{players:t.players,showPoints:t.showPoints,myName:t.myName}}),t.observer?t._e():o("div",{staticClass:"row mb-5"},[o("div",{staticClass:"col"},[o("button",{staticClass:"btn btn-lg btn-block btn-danger",on:{click:t.clearVotes}},[t._v("Clear Votes")])]),o("div",{staticClass:"col"},[o("button",{staticClass:"btn btn-lg btn-block btn-primary",on:{click:t.showVotes}},[t._v("Show Votes")])])]),o("div",{staticClass:"text-secondary text-center"},[t.observer?o("p",[o("span",{staticClass:"badge badge-info"},[t._v("info")]),t._v(" You are an observer of this session.")]):t._e(),t.observer?t._e():o("p",[o("span",{staticClass:"badge badge-secondary"},[t._v("Tips")]),t._v(" To delete a player, right click its name.")]),o("p",[o("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.refresh(e)}}},[t._v("Refresh")]),t._v(" | "),o("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Log Out")])])])],1)},Y=[],B=(o("a623"),o("4de4"),o("07ac"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[o("div",{staticClass:"btn-group mr-2",attrs:{role:"group"}},t._l(t.points,(function(e,n){return o("button",{key:n,class:["btn",t.currentPoint==e?"btn-primary":"btn-outline-primary"],attrs:{type:"button"},on:{click:function(o){return t.select(e)}}},[t._v(" "+t._s(e)+" ")])})),0),o("div",{staticClass:"btn-group",attrs:{role:"group"}},[o("button",{class:["btn",-1==t.currentPoint?"btn-secondary":"btn-outline-secondary"],attrs:{type:"button"},on:{click:function(e){return t.select(-1)}}},[t._v(" ? ")])])])}),K=[],G=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.points=[.5,1,2,3,5,8,13],t}return Object(E["a"])(o,[{key:"select",value:function(t){this.$emit("onPoint",t)}}]),o}(u["c"]);Object(l["__decorate"])([Object(u["b"])()],G.prototype,"currentPoint",void 0),G=Object(l["__decorate"])([u["a"]],G);var W=G,Q=W,X=(o("edcd"),Object(d["a"])(Q,B,K,!1,null,"3caaecba",null)),Z=X.exports,tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("table",[t._m(0),o("tbody",{class:{"table-success":t.showPoints}},t._l(t.players,(function(e,n){return o("tr",{key:n,class:{"table-warning":0==e.point}},[o("td",{staticClass:"w-50",on:{contextmenu:function(e){return t.deletePlayer(e,n)}}},[t._v(t._s(t._f("nameFilter")(n)))]),o("td",{staticClass:"w-50"},[e.connected?[t.showPoints||0==e.point?t.showPoints?t._e():o("font-awesome-icon",{staticClass:"text-secondary",attrs:{icon:"ellipsis-h",size:"lg"}}):o("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check-circle",size:"lg"}}),n!==t.myName&&!t.showPoints||0==e.point?t.showPoints&&0==e.point?o("small",{staticClass:"text-muted"},[t._v(" Not Voting ")]):t._e():o("span",{staticClass:"point-value"},[t._v(" "+t._s(e.point>0?e.point:"?")+" ")])]:o("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:"wifi"}})],2)])})),0)])},et=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",{staticClass:"thead-dark"},[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("Player")]),o("th",{attrs:{scope:"col"}},[t._v("Point")])])])}],ot=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){return Object(s["a"])(this,o),e.apply(this,arguments)}return Object(E["a"])(o,[{key:"deletePlayer",value:function(t,e){t.preventDefault(),confirm('Delete player "'+e+'" ?')&&H.deletePlayer(e)}}]),o}(u["c"]);Object(l["__decorate"])([Object(u["b"])()],ot.prototype,"players",void 0),Object(l["__decorate"])([Object(u["b"])()],ot.prototype,"showPoints",void 0),Object(l["__decorate"])([Object(u["b"])()],ot.prototype,"myName",void 0),ot=Object(l["__decorate"])([Object(u["a"])({components:{},filters:{nameFilter:p}})],ot);var nt=ot,rt=nt,at=(o("13fb"),Object(d["a"])(rt,tt,et,!1,null,"c078b910",null)),st=at.exports,it=function(t){Object(c["a"])(o,t);var e=Object(i["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.room="",t.myName="",t.myPoint=0,t.observer=!1,t.showPoints=!1,t.players={},t}return Object(E["a"])(o,[{key:"created",value:function(){this.room=this.$route.params.room.toLowerCase().trim(),this.observer="1"==this.$route.query.observer,this.observer||(this.myName=this.$store.getters.getName),this.$store.commit("setRoom",this.room)}},{key:"mounted",value:function(){var t=this;this.room&&(this.myName||this.observer)?(H.signIn(this.room,this.myName),H.watch((function(e){var o=e.val();t.players=o.players,t.updateMyPoint();var n=Object.values(t.players);t.showPoints=1==o.showPoints||t.allPlayersVoted(n),t.isConsistent(n)&&t.$store.commit("showConfetti")}))):this.$router.push("/")}},{key:"point",value:function(t){H.setPoint(t)}},{key:"clearVotes",value:function(){H.clearVotes()}},{key:"showVotes",value:function(){H.showVotes()}},{key:"refresh",value:function(){window.location.reload()}},{key:"logout",value:function(){H.deletePlayer(this.myName),this.$router.push("/")}},{key:"isConsistent",value:function(t){var e=t.filter((function(t){return t.connected&&t.point>=0})),o=e.length>=2&&e[0].point>0&&e.every((function(t){return t.point==e[0].point}));return o}},{key:"allPlayersVoted",value:function(t){return 0===t.filter((function(t){return 0==t.point})).length}},{key:"updateMyPoint",value:function(){this.players[this.myName]&&(this.myPoint=this.players[this.myName].point)}},{key:"beforeDestroy",value:function(){H.detachListener()}}]),o}(u["c"]);it=Object(l["__decorate"])([Object(u["a"])({components:{PokerComponent:Z,PlayersComponent:st},filters:{nameFilter:p}})],it);var ct=it,lt=ct,ut=Object(d["a"])(lt,U,Y,!1,null,"06ae685e",null),mt=ut.exports;n["a"].use(V["a"]);var ft=[{path:"/",name:"Signin",component:q},{path:"/:room",name:"Main",component:mt}],pt=new V["a"]({routes:ft}),bt=pt,vt=o("2f62");n["a"].use(vt["a"]);var ht=new vt["a"].Store({state:{myName:"",room:"",confetti:!1},getters:{getName:function(t){return t.myName=localStorage.getItem("myName")||"",t.myName},getRoom:function(t){return t.room=localStorage.getItem("room")||"",t.room}},mutations:{setName:function(t,e){t.myName=e.toLowerCase(),localStorage.setItem("myName",t.myName)},setRoom:function(t,e){t.room=e.toLowerCase(),localStorage.setItem("room",t.room)},showConfetti:function(t){t.confetti=!0,window.setTimeout((function(){t.confetti=!1}),5e3)}},actions:{},modules:{}}),dt=o("ecee"),yt=o("c074"),_t=o("ad3d");dt["c"].add(yt["c"]),dt["c"].add(yt["a"]),dt["c"].add(yt["b"]),dt["c"].add(yt["d"]),n["a"].component("font-awesome-icon",_t["a"]),n["a"].config.productionTip=!1,new n["a"]({router:bt,store:ht,render:function(t){return t(I)}}).$mount("#app")},edcd:function(t,e,o){"use strict";var n=o("c583"),r=o.n(n);r.a},ef17:function(t,e,o){},f019:function(t,e,o){"use strict";var n=o("41bc"),r=o.n(n);r.a}});
//# sourceMappingURL=app.b4cac322.js.map